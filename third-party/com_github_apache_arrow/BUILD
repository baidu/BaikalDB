licenses(["notice"])

cc_library(
    name = "arrow",
    srcs = [
        "cpp/src/arrow/array/array_base.cc",
        "cpp/src/arrow/array/array_binary.cc",
        "cpp/src/arrow/array/array_decimal.cc",
        "cpp/src/arrow/array/array_dict.cc",
        "cpp/src/arrow/array/array_nested.cc",
        "cpp/src/arrow/array/array_primitive.cc",
        "cpp/src/arrow/array/array_run_end.cc",
        "cpp/src/arrow/array/builder_adaptive.cc",
        "cpp/src/arrow/array/builder_base.cc",
        "cpp/src/arrow/array/builder_binary.cc",
        "cpp/src/arrow/array/builder_decimal.cc",
        "cpp/src/arrow/array/builder_dict.cc",
        "cpp/src/arrow/array/builder_run_end.cc",
        "cpp/src/arrow/array/builder_nested.cc",
        "cpp/src/arrow/array/builder_primitive.cc",
        "cpp/src/arrow/array/builder_union.cc",
        "cpp/src/arrow/array/concatenate.cc",
        "cpp/src/arrow/array/data.cc",
        "cpp/src/arrow/array/diff.cc",
        "cpp/src/arrow/array/util.cc",
        "cpp/src/arrow/array/validate.cc",
        "cpp/src/arrow/builder.cc",
        "cpp/src/arrow/buffer.cc",
        "cpp/src/arrow/chunked_array.cc",
        "cpp/src/arrow/chunk_resolver.cc",
        "cpp/src/arrow/compare.cc",
        "cpp/src/arrow/datum.cc",
        "cpp/src/arrow/device.cc",
        "cpp/src/arrow/extension_type.cc",
        "cpp/src/arrow/extension/fixed_shape_tensor.cc",
        "cpp/src/arrow/memory_pool.cc",
        "cpp/src/arrow/pretty_print.cc",
        "cpp/src/arrow/record_batch.cc",
        "cpp/src/arrow/result.cc",
        "cpp/src/arrow/scalar.cc",
        "cpp/src/arrow/sparse_tensor.cc",
        "cpp/src/arrow/status.cc",
        "cpp/src/arrow/table.cc",
        "cpp/src/arrow/table_builder.cc",
        "cpp/src/arrow/tensor.cc",
        "cpp/src/arrow/tensor/coo_converter.cc",
        "cpp/src/arrow/tensor/csf_converter.cc",
        "cpp/src/arrow/tensor/csx_converter.cc",
        "cpp/src/arrow/type.cc",
        "cpp/src/arrow/type_traits.cc",
        "cpp/src/arrow/visitor.cc",
        "cpp/src/arrow/c/bridge.cc",
        "cpp/src/arrow/io/buffered.cc",
        "cpp/src/arrow/io/caching.cc",
        "cpp/src/arrow/io/compressed.cc",
        "cpp/src/arrow/io/file.cc",
        "cpp/src/arrow/io/interfaces.cc",
        "cpp/src/arrow/io/memory.cc",
        "cpp/src/arrow/io/slow.cc",
        "cpp/src/arrow/io/stdio.cc",
        "cpp/src/arrow/io/transform.cc",
        "cpp/src/arrow/util/align_util.cc",
        "cpp/src/arrow/util/async_util.cc",
        "cpp/src/arrow/util/atfork_internal.cc",
        "cpp/src/arrow/util/basic_decimal.cc",
        "cpp/src/arrow/util/bit_block_counter.cc",
        "cpp/src/arrow/util/bit_run_reader.cc",
        "cpp/src/arrow/util/bit_util.cc",
        "cpp/src/arrow/util/bitmap.cc",
        "cpp/src/arrow/util/bitmap_builders.cc",
        "cpp/src/arrow/util/bitmap_ops.cc",
        "cpp/src/arrow/util/bpacking.cc",
        "cpp/src/arrow/util/byte_size.cc",
        "cpp/src/arrow/util/cancel.cc",
        "cpp/src/arrow/util/compression.cc",
        "cpp/src/arrow/util/counting_semaphore.cc",
        "cpp/src/arrow/util/cpu_info.cc",
        "cpp/src/arrow/util/crc32.cc",
        "cpp/src/arrow/util/debug.cc",
        "cpp/src/arrow/util/decimal.cc",
        "cpp/src/arrow/util/delimiting.cc",
        "cpp/src/arrow/util/float16.cc",
        "cpp/src/arrow/util/formatting.cc",
        "cpp/src/arrow/util/future.cc",
        "cpp/src/arrow/util/int_util.cc",
        "cpp/src/arrow/util/io_util.cc",
        "cpp/src/arrow/util/logging.cc",
        "cpp/src/arrow/util/key_value_metadata.cc",
        "cpp/src/arrow/util/memory.cc",
        "cpp/src/arrow/util/mutex.cc",
        "cpp/src/arrow/util/ree_util.cc",
        "cpp/src/arrow/util/string.cc",
        "cpp/src/arrow/util/string_builder.cc",
        "cpp/src/arrow/util/task_group.cc",
        "cpp/src/arrow/util/tdigest.cc",
        "cpp/src/arrow/util/thread_pool.cc",
        "cpp/src/arrow/util/time.cc",
        "cpp/src/arrow/util/tracing.cc",
        "cpp/src/arrow/util/trie.cc",
        "cpp/src/arrow/util/union_util.cc",
        "cpp/src/arrow/util/unreachable.cc",
        "cpp/src/arrow/util/uri.cc",
        "cpp/src/arrow/util/utf8.cc",
        "cpp/src/arrow/util/value_parsing.cc",
        "cpp/src/arrow/util/hashing.cc",
        "cpp/src/arrow/util/list_util.cc",
        "cpp/src/arrow/util/dict_util.cc",
        "cpp/src/arrow/vendored/base64.cpp",
        "cpp/src/arrow/vendored/datetime/tz.cpp",
        "cpp/src/arrow/vendored/double-conversion/bignum.cc",
        "cpp/src/arrow/vendored/double-conversion/double-to-string.cc",
        "cpp/src/arrow/vendored/double-conversion/string-to-double.cc",
        "cpp/src/arrow/vendored/double-conversion/bignum-dtoa.cc",
        "cpp/src/arrow/vendored/double-conversion/fast-dtoa.cc",
        "cpp/src/arrow/vendored/double-conversion/cached-powers.cc",
        "cpp/src/arrow/vendored/double-conversion/fixed-dtoa.cc",
        "cpp/src/arrow/vendored/double-conversion/strtod.cc",
        "cpp/src/arrow/util/compression_bz2.cc",
        "cpp/src/arrow/util/compression_lz4.cc",
        "cpp/src/arrow/util/compression_snappy.cc",
        "cpp/src/arrow/util/compression_zlib.cc",
        "cpp/src/arrow/util/compression_zstd.cc",
        "cpp/src/arrow/compute/api_aggregate.cc",
        "cpp/src/arrow/compute/api_scalar.cc",
        "cpp/src/arrow/compute/api_vector.cc",
        "cpp/src/arrow/compute/cast.cc",
        "cpp/src/arrow/compute/exec.cc",
        "cpp/src/arrow/compute/expression.cc",
        "cpp/src/arrow/compute/function.cc",
        "cpp/src/arrow/compute/function_internal.cc",
        "cpp/src/arrow/compute/kernel.cc",
        "cpp/src/arrow/compute/key_hash_internal.cc",
        "cpp/src/arrow/compute/key_map_internal.cc",
        "cpp/src/arrow/compute/light_array_internal.cc",
        "cpp/src/arrow/compute/ordering.cc",
        "cpp/src/arrow/compute/registry.cc",
        "cpp/src/arrow/compute/kernels/ree_util_internal.cc",
        "cpp/src/arrow/compute/kernels/codegen_internal.cc",
        "cpp/src/arrow/compute/kernels/row_encoder.cc",
        "cpp/src/arrow/compute/kernels/scalar_cast_boolean.cc",
        "cpp/src/arrow/compute/kernels/scalar_cast_dictionary.cc",
        "cpp/src/arrow/compute/kernels/scalar_cast_extension.cc",
        "cpp/src/arrow/compute/kernels/scalar_cast_internal.cc",
        "cpp/src/arrow/compute/kernels/scalar_cast_nested.cc",
        "cpp/src/arrow/compute/kernels/scalar_cast_numeric.cc",
        "cpp/src/arrow/compute/kernels/scalar_cast_string.cc",
        "cpp/src/arrow/compute/kernels/scalar_cast_temporal.cc",
        "cpp/src/arrow/compute/kernels/util_internal.cc",
        "cpp/src/arrow/compute/kernels/vector_hash.cc",
        "cpp/src/arrow/compute/kernels/vector_selection.cc",
        "cpp/src/arrow/compute/kernels/vector_pairwise.cc",
        "cpp/src/arrow/compute/kernels/vector_selection_take_internal.cc",
        "cpp/src/arrow/compute/kernels/vector_selection_filter_internal.cc",
        "cpp/src/arrow/compute/kernels/vector_selection_internal.cc",
        "cpp/src/arrow/compute/row/encode_internal.cc",
        "cpp/src/arrow/compute/row/compare_internal.cc",
        "cpp/src/arrow/compute/row/grouper.cc",
        "cpp/src/arrow/compute/row/row_internal.cc",
        "cpp/src/arrow/compute/util.cc",
        "cpp/src/arrow/compute/key_hash_internal_avx2.cc",
        "cpp/src/arrow/compute/key_map_internal_avx2.cc",
        "cpp/src/arrow/compute/row/compare_internal_avx2.cc",
        "cpp/src/arrow/compute/row/encode_internal_avx2.cc",
        "cpp/src/arrow/compute/util_avx2.cc",
        "cpp/src/arrow/util/bpacking_avx2.cc",
        "cpp/src/arrow/compute/kernels/aggregate_basic.cc",
        "cpp/src/arrow/compute/kernels/aggregate_mode.cc",
        "cpp/src/arrow/compute/kernels/aggregate_quantile.cc",
        "cpp/src/arrow/compute/kernels/aggregate_tdigest.cc",
        "cpp/src/arrow/compute/kernels/aggregate_var_std.cc",
        "cpp/src/arrow/compute/kernels/hash_aggregate.cc",
        "cpp/src/arrow/compute/kernels/scalar_arithmetic.cc",
        "cpp/src/arrow/compute/kernels/scalar_boolean.cc",
        "cpp/src/arrow/compute/kernels/scalar_compare.cc",
        "cpp/src/arrow/compute/kernels/scalar_if_else.cc",
        "cpp/src/arrow/compute/kernels/scalar_nested.cc",
        "cpp/src/arrow/compute/kernels/scalar_random.cc",
        "cpp/src/arrow/compute/kernels/scalar_round.cc",
        "cpp/src/arrow/compute/kernels/scalar_set_lookup.cc",
        "cpp/src/arrow/compute/kernels/scalar_string_ascii.cc",
        "cpp/src/arrow/compute/kernels/scalar_string_utf8.cc",
        "cpp/src/arrow/compute/kernels/scalar_temporal_binary.cc",
        "cpp/src/arrow/compute/kernels/scalar_temporal_unary.cc",
        "cpp/src/arrow/compute/kernels/scalar_validity.cc",
        "cpp/src/arrow/compute/kernels/vector_array_sort.cc",
        "cpp/src/arrow/compute/kernels/vector_cumulative_ops.cc",
        "cpp/src/arrow/compute/kernels/vector_nested.cc",
        "cpp/src/arrow/compute/kernels/vector_rank.cc",
        "cpp/src/arrow/compute/kernels/vector_replace.cc",
        "cpp/src/arrow/compute/kernels/vector_run_end_encode.cc",
        "cpp/src/arrow/compute/kernels/vector_select_k.cc",
        "cpp/src/arrow/compute/kernels/vector_sort.cc",
        "cpp/src/arrow/compute/kernels/aggregate_basic_avx2.cc",
        "cpp/src/arrow/filesystem/filesystem.cc",
        "cpp/src/arrow/filesystem/localfs.cc",
        "cpp/src/arrow/filesystem/mockfs.cc",
        "cpp/src/arrow/filesystem/path_util.cc",
        "cpp/src/arrow/filesystem/util_internal.cc",
        "cpp/src/arrow/ipc/dictionary.cc",
        "cpp/src/arrow/ipc/feather.cc",
        "cpp/src/arrow/ipc/message.cc",
        "cpp/src/arrow/ipc/metadata_internal.cc",
        "cpp/src/arrow/ipc/options.cc",
        "cpp/src/arrow/ipc/reader.cc",
        "cpp/src/arrow/ipc/writer.cc",
        "cpp/src/arrow/acero/accumulation_queue.cc",
        "cpp/src/arrow/acero/aggregate_internal.cc",
        "cpp/src/arrow/acero/groupby_aggregate_node.cc",
        "cpp/src/arrow/acero/scalar_aggregate_node.cc",
        "cpp/src/arrow/acero/asof_join_node.cc",
        "cpp/src/arrow/acero/bloom_filter.cc",
        "cpp/src/arrow/acero/exec_plan.cc",
        "cpp/src/arrow/acero/fetch_node.cc",
        "cpp/src/arrow/acero/filter_node.cc",
        "cpp/src/arrow/acero/hash_join.cc",
        "cpp/src/arrow/acero/hash_join_dict.cc",
        "cpp/src/arrow/acero/hash_join_node.cc",
        "cpp/src/arrow/acero/map_node.cc",
        "cpp/src/arrow/acero/options.cc",
        "cpp/src/arrow/acero/order_by_node.cc",
        "cpp/src/arrow/acero/order_by_impl.cc",
        "cpp/src/arrow/acero/partition_util.cc",
        "cpp/src/arrow/acero/pivot_longer_node.cc",
        "cpp/src/arrow/acero/project_node.cc",
        "cpp/src/arrow/acero/query_context.cc",
        "cpp/src/arrow/acero/sink_node.cc",
        "cpp/src/arrow/acero/source_node.cc",
        "cpp/src/arrow/acero/swiss_join.cc",
        "cpp/src/arrow/acero/task_util.cc",
        "cpp/src/arrow/acero/tpch_node.cc",
        "cpp/src/arrow/acero/union_node.cc",
        "cpp/src/arrow/acero/util.cc",
        "cpp/src/arrow/acero/time_series_util.cc",
        "cpp/src/arrow/acero/sorted_merge_node.cc",
        "cpp/src/arrow/acero/bloom_filter_avx2.cc",
        "cpp/src/arrow/acero/swiss_join_avx2.cc",
        "cpp/src/parquet/arrow/path_internal.cc",
        "cpp/src/parquet/arrow/reader.cc",
        "cpp/src/parquet/arrow/reader_internal.cc",
        "cpp/src/parquet/arrow/schema.cc",
        "cpp/src/parquet/arrow/schema_internal.cc",
        "cpp/src/parquet/arrow/writer.cc",
        "cpp/src/parquet/bloom_filter.cc",
        "cpp/src/parquet/bloom_filter_reader.cc",
        "cpp/src/parquet/column_reader.cc",
        "cpp/src/parquet/column_scanner.cc",
        "cpp/src/parquet/column_writer.cc",
        "cpp/src/parquet/encoding.cc",
        "cpp/src/parquet/encryption/encryption.cc",
        "cpp/src/parquet/encryption/internal_file_decryptor.cc",
        "cpp/src/parquet/encryption/internal_file_encryptor.cc",
        "cpp/src/parquet/encryption/openssl_internal.cc",
        "cpp/src/parquet/encryption/encryption_internal.cc",
        "cpp/src/parquet/encryption/encryption_internal_nossl.cc",
        "cpp/src/parquet/exception.cc",
        "cpp/src/parquet/file_reader.cc",
        "cpp/src/parquet/file_writer.cc",
        "cpp/src/parquet/level_comparison.cc",
        "cpp/src/parquet/level_conversion.cc",
        "cpp/src/parquet/metadata.cc",
        "cpp/src/parquet/xxhasher.cc",
        "cpp/src/parquet/page_index.cc",
        "cpp/src/generated/parquet_constants.cpp",
        "cpp/src/generated/parquet_types.cpp",
        "cpp/src/parquet/platform.cc",
        "cpp/src/parquet/printer.cc",
        "cpp/src/parquet/properties.cc",
        "cpp/src/parquet/schema.cc",
        "cpp/src/parquet/statistics.cc",
        "cpp/src/parquet/stream_reader.cc",
        "cpp/src/parquet/stream_writer.cc",
        "cpp/src/parquet/types.cc",
        "cpp/src/parquet/level_comparison_avx2.cc",
        "cpp/src/parquet/level_conversion_bmi2.cc",
        "cpp/src/parquet/encryption/crypto_factory.cc",
        "cpp/src/parquet/encryption/file_key_unwrapper.cc",
        "cpp/src/parquet/encryption/file_key_wrapper.cc",
        "cpp/src/parquet/encryption/file_system_key_material_store.cc",
        "cpp/src/parquet/encryption/kms_client.cc",
        "cpp/src/parquet/encryption/key_material.cc",
        "cpp/src/parquet/encryption/key_metadata.cc",
        "cpp/src/parquet/encryption/key_toolkit.cc",
        "cpp/src/parquet/encryption/key_toolkit_internal.cc",
        "cpp/src/parquet/encryption/local_wrap_kms_client.cc",
        "cpp/src/arrow/dataset/dataset.cc",
        "cpp/src/arrow/dataset/dataset_writer.cc",
        "cpp/src/arrow/dataset/discovery.cc",
        "cpp/src/arrow/dataset/file_base.cc",
        "cpp/src/arrow/dataset/file_ipc.cc",
        "cpp/src/arrow/dataset/partition.cc",
        "cpp/src/arrow/dataset/plan.cc",
        "cpp/src/arrow/dataset/projector.cc",
        "cpp/src/arrow/dataset/scanner.cc",
        "cpp/src/arrow/dataset/scan_node.cc",
        "cpp/src/arrow/dataset/file_parquet.cc",
    ],
    hdrs = glob([
        "cpp/src/arrow/*.h",
        "cpp/src/arrow/**/*.h",
        "cpp/src/arrow/**/*.hpp",
        "cpp/src/arrow/**/xxhash.c",
        "cpp/src/parquet/*.h",
        "cpp/src/parquet/**/*.h",
        "cpp/src/parquet/**/*.hpp",
        "cpp/thirdparty/flatbuffers/include/flatbuffers/*.h",
        "cpp/src/generated/*",
    ]),
    includes = [
        "cpp/src",
        "cpp/thirdparty/flatbuffers/include",
    ],
    defines = [
    ],
    copts = [
        "-DARROW_WITH_SNAPPY",
        "-DARROW_WITH_ZLIB",
        "-DARROW_WITH_LZ4",
        "-DARROW_WITH_ZSTD",
        "-DARROW_WITH_RE2",
        "-DARROW_COMPUTE",
        "-DARROW_USE_SIMD",
        "-DARROW_HAVE_RUNTIME_SSE4_2",
        "-DARROW_HAVE_RUNTIME_AVX2",
        "-DARROW_HAVE_RUNTIME_BMI2",
        "-fno-omit-frame-pointer",
        "-momit-leaf-frame-pointer",
        "-msse",
        "-msse4.2",
        "-mavx2",
        "-mbmi2",
        "-pthread",
        "-Wsign-compare",
        "-Wno-unused-parameter",
        "-Wno-unused-variable",
        "-Woverloaded-virtual",
        "-Wnon-virtual-dtor",
        "-Wno-missing-field-initializers",
        "-fno-builtin-memcmp",
        "-std=c++17",
        "-mpclmul",
        "-O2",
    ],
    linkopts = [
        "-lm",
        "-lpthread",
    ],
    deps = [
        "//external:snappy",
        "//external:zlib",
        "//external:lz4",
        "//external:zstd",
        "//external:re2",
    ],
    visibility = ["//visibility:public"],
)

